import{_ as R}from"./BfTqIiWn.js";import{_ as z}from"./CaAIdn3K.js";import{_ as L}from"./BB4cCHNO.js";import{d as O,g as P,h as d,w as S,u as Q,c as n,a as e,b as m,e as h,i as r,j as v,k as b,o as s,l as $,t as F,_ as H}from"./IDwgxPXe.js";import{_ as T}from"./g2WRgCYN.js";import{_ as G}from"./lCIn6IBk.js";import{_ as I}from"./D6La4KVw.js";import{n as U}from"./BDKNwZmu.js";import{u as C}from"./Di5aD89Z.js";import"./Crb7vpWo.js";import"./GqunamJA.js";import"./TG2Z91GR.js";const J={key:0},K={key:1},M={key:0},W={key:1,class:"mb-0"},X=["textContent"],Y={key:2,class:"mt-4"},Z={key:0,class:"mb-0"},ee={key:3,class:"mt-4"},te={key:0,class:"mb-0"},se={key:4,class:"mt-4"},oe={key:0,class:"mb-0"},ne={key:2},ye=O({__name:"recherche",async setup(re){var V;let o,a;const p=(V=P().query.requete)==null?void 0:V.toString(),w=d(()=>p?U(p):".*"),{status:j,data:q}=([o,a]=S(()=>C("/_api/latex/lecons/index.json","$mCpmiEIoUo")),o=await o,a(),o),{status:A,data:B}=([o,a]=S(()=>C("/_api/latex/developpements/index.json","$gszzv3HPqk")),o=await o,a(),o),{status:D,data:E}=([o,a]=S(()=>C("/_api/latex/fiches/index.json","$OnOGsp1LDs")),o=await o,a(),o),g=y=>{const t=[];if(!y.value)return t;for(const k of y.value){const x=RegExp(w.value,"ig"),c=k;x.test(c["page-name-search"])&&t.push(c)}return t},l=d(()=>g(q)),i=d(()=>g(B)),u=d(()=>g(E)),f=d(()=>l.value.length===0&&i.value.length===0&&u.value.length===0);return Q({title:"Recherche"}),(y,t)=>{const k=R,x=z,c=L,N=H;return s(),n("div",null,[e(j)==="pending"||e(A)==="pending"||e(D)==="pending"?(s(),n("div",J,[m(k)])):e(l)&&e(i)&&e(u)?(s(),n("div",K,[t[5]||(t[5]=h("h2",null,"Recherche",-1)),e(f)?(s(),n("p",M," Votre recherche n'a donné aucun résultat. ")):(s(),n("p",W,[m(x,{fallback:"Voici les résultats pour votre recherche."},{default:v(()=>[t[0]||(t[0]=$(" Voici les résultats pour votre recherche de ")),h("q",{textContent:F(e(p)&&e(p).length>0?e(p):"Tout")},null,8,X),t[1]||(t[1]=$(". "))]),_:1})])),e(l)&&!e(f)?(s(),n("div",Y,[t[2]||(t[2]=h("h3",null,"Leçons",-1)),e(l).length===0?(s(),n("p",Z," Aucun plan de leçon trouvé pour cette recherche. ")):r("",!0),e(l).length>0?(s(),b(c,{key:1,"input-id":"lesson-search-field",items:e(l)},{default:v(_=>[m(T,{lesson:_.item},null,8,["lesson"])]),_:1},8,["items"])):r("",!0)])):r("",!0),e(i)&&!e(f)?(s(),n("div",ee,[t[3]||(t[3]=h("h3",null,"Développements",-1)),e(i).length===0?(s(),n("p",te," Aucun développement trouvé pour cette recherche. ")):r("",!0),e(i).length>0?(s(),b(c,{key:1,"input-id":"development-search-field",items:e(i)},{default:v(_=>[m(G,{development:_.item},null,8,["development"])]),_:1},8,["items"])):r("",!0)])):r("",!0),e(u)&&!e(f)?(s(),n("div",se,[t[4]||(t[4]=h("h3",null,"Fiches",-1)),e(u).length===0?(s(),n("p",oe," Aucune fiche trouvée pour cette recherche. ")):r("",!0),e(u).length>0?(s(),b(c,{key:1,"input-id":"sheet-search-field",items:e(u)},{default:v(_=>[m(I,{sheet:_.item},null,8,["sheet"])]),_:1},8,["items"])):r("",!0)])):r("",!0)])):(s(),n("div",ne,[m(N,{error:"500"})]))])}}});export{ye as default};
